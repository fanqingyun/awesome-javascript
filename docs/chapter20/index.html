<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>postmessage</title>
</head>

<body>
    <div>端口9002的index</div>
    <input type="file" id="file-list" multiple>
    <iframe src="http://192.1.1.14:9001/src.html" frameborder="0" id="myframe"></iframe>
    <!-- <iframe src="../chapter19/src.html" frameborder="0" id="myframe"></iframe> -->
    <script>
        let iframeWindow = document.getElementById("myframe").contentWindow;
        // window.setTimeout(() => {
        //     iframeWindow.postMessage("A secret", "http://192.1.1.14:9001");
        // }, 1000)
        let fileDom = document.querySelector('#file-list')
        fileDom.addEventListener('change', function(e) {
            iframeWindow.postMessage(this.files, "http://192.1.1.14:9001");
        })
        window.addEventListener("message", (event) => {
            console.log(event.data)
        });
    </script>
</body>

</html>